<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">



  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">






  

  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/bower_components/font-awesome/css/font-awesome.min.css">

  <!-- Theme style -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/dist/css/AdminLTE.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/dist/css/skins/skins-biasawae.css">








<!-- jQuery 3 -->
<script src="http://192.168.1.100/template/adminlte/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="http://192.168.1.100/template/adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- AdminLTE App -->
<script src="http://192.168.1.100/template/adminlte/dist/js/adminlte.min.js"></script>



  


<!-- Bootstrap core JavaScript -->
<script src="http://192.168.1.100/template/vendor/jquery/jquery.min.js"></script>
<script src="http://192.168.1.100/template/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>






	

    <link href="style.css" rel="stylesheet">




<script type="text/javascript" charset="utf-8" src="cordova.js"></script>







<script>
$(document).ready(function(){


$(document).ajaxStart(function() 
	{
	$('#loading').show();
	}).ajaxStop(function() 
	{
	$('#loading').hide();
	});




$.ajax({
	url: "http://192.168.1.100/covid_android_satgas/i_akun_notif_perilaku_detail.php?aksi=form",
	type:$(this).attr("method"),
	data:$(this).serialize(),
	success:function(data){		
		$("#isinya").html(data);
		}
	});



/*
$.ajax({
	url: "http://192.168.1.100/covid_android_satgas/i_akun_notif_perilaku_detail.php?aksi=form2",
	type:$(this).attr("method"),
	data:$(this).serialize(),
	success:function(data){		
		$("#isinya2").html(data);
		}
	});
*/








})
</script>





</head>

<body>

	<!--================Header Menu Area =================-->
	<header>
	    <div class="header">
		<div class="container-fluid"  id="myheader">
		    <div class="row">
			<div class="col-md-12">
				<table border="0" width="100%">
				<tr>
				<td width="30" align="left">
				<a href="akun_notif.html">
					<i class="fa fa-arrow-left" style="color:orange"></i>
				</a>


				</td>

				<td align="left">
					<font color="yellow">DETAIL PERILAKU MASYARAKAT</font>

				</td>
				</tr>
				</table>


			</div>
		    </div>
		</div>
	</header>
	<!--================Header Menu Area =================-->


<hr>






        
        
        


	<div class="row">


		<div class="col-md-12">


			<div class="box box-danger">
			<div class="box-body">
			<div class="row">
				<div class="col-md-12">


					<div id="isinya"></div>
					
					<hr>
						
						
						
						


						<!-- jQuery -->
						<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
						 
						<!-- jQuery UI -->
						<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
						<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
						 
						<!-- Bootstrap CSS -->
						<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
			
			
			
			
						<script src="//code.jquery.com/jquery-1.10.2.js"></script>

						<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBZ73oHLqNFmGX6bs3qyyRAoCim-_WxdqQ"></script>
											
							 <script>
							 
							 $(document).ready(function(){
				
				
				
								setInterval(loadLog37, 10000);
								
								function loadLog37()
									{
									$.ajax({
										url: "http://192.168.1.100/covid_android_satgas/i_akun_notif_perilaku_detail.php?aksi=gpspenolongkorban",
										type:$(this).attr("method"),
										data:$(this).serialize(),
										success:function(data){
											
											var latLng = data;
											latLng = latLng.split(",");	
											$("#slectedLat").val(latLng[0]);		
											$("#slectedLon").val(latLng[1]);
											$("#slectedLat2").val(latLng[2]);		
											$("#slectedLon2").val(latLng[3]);
											
											
											var instance = new GoogleMap_selected();
											instance.initialize();
											}
										});
				
									}
								
				
				
				
				
								$.ajax({
									url: "http://192.168.1.100/covid_android_satgas/i_akun_notif_perilaku_detail.php?aksi=gpspenolongkorban",
									type:$(this).attr("method"),
									data:$(this).serialize(),
									success:function(data){
										
										var latLng = data;
										latLng = latLng.split(",");	
										$("#slectedLat").val(latLng[0]);		
										$("#slectedLon").val(latLng[1]);
										$("#slectedLat2").val(latLng[2]);		
										$("#slectedLon2").val(latLng[3]);
										
										
										var instance = new GoogleMap_selected();
										instance.initialize();
										}
									});
								
								});
								
								
							
				
				
				
									/*
									var mylatitude = -7.01150061;
									var mylongitude = 110.11647008;
									*/
									
							
									function GoogleMap_selected() {
							
										var lattitude_value = document.getElementById('slectedLat').value;
										var longitude_value = document.getElementById('slectedLon').value;
							
							
										var mylatitude = document.getElementById('slectedLat2').value;
										var mylongitude = document.getElementById('slectedLon2').value;
										
										
										var from = new google.maps.LatLng(mylatitude, mylongitude);
										var to = new google.maps.LatLng(lattitude_value, longitude_value);
							
										var directionsService = new google.maps.DirectionsService();
										var directionsRequest = {
											origin: from,
											destination: to,
											travelMode: google.maps.DirectionsTravelMode.DRIVING,
											unitSystem: google.maps.UnitSystem.METRIC
										};
							
										this.initialize = function () {
											var map = showMap_selected();
							
											directionsService.route(
											directionsRequest,
							
											function (response, status) {
							
											    if (status == google.maps.DirectionsStatus.OK) {
											        new google.maps.DirectionsRenderer({
											            map: map,
											            directions: response,
											            suppressMarkers: true
											        });
											        var leg = response.routes[0].legs[0];
											        makeMarker(leg.start_location, icons.start, "TKP", map);
											        makeMarker(leg.end_location, icons.end, 'SATGAS', map);
							
											    } else {
											        //alert("Unable to retrive route");
											    }
							
											});
							
										}
							
										function makeMarker(position, icon, title, map) {
											new google.maps.Marker({
											    position: position,
											    map: map,
											    icon: icon,
											    title: title
											});
										}
							
										var icons = {
											start: new google.maps.MarkerImage(
											// URL
											'http://maps.google.com/mapfiles/ms/micons/blue.png',
											// (width,height)
											new google.maps.Size(44, 32),
											// The origin point (x,y)
											new google.maps.Point(0, 0),
											// The anchor point (x,y)
											new google.maps.Point(22, 32)),
											end: new google.maps.MarkerImage(
											// URL
											'http://maps.google.com/mapfiles/ms/micons/green.png',
											// (width,height)
											new google.maps.Size(44, 32),
											// The origin point (x,y)
											new google.maps.Point(0, 0),
											// The anchor point (x,y)
											new google.maps.Point(22, 32))
										};
							
							
										var showMap_selected = function () {
											var mapOptions = {
											    zoom: 12,
											    center: new google.maps.LatLng(lattitude_value, longitude_value),
											    mapTypeId: google.maps.MapTypeId.ROADMAP
											};
											var map = new google.maps.Map(document.getElementById("selected_map_canvas"), mapOptions);
											return map;
										};
									}
							
									function initialize() {
										var instance = new GoogleMap_selected();
										instance.initialize();
									}
							
									google.maps.event.addDomListener(window, 'load', initialize);
							
							        </script>
							        <style>
							
										#selected_map_canvas {
											height: 400px;
											margin: 0px;
											padding: 0px
										}
							
							
							        </style>
				
				
				
				
										<input type="text" id="slectedLat" value="-6.9711431" style="display:none"></input>
										<input type="text" id="slectedLon" value="110.1501243" style="display:none"></input>
										<input type="text" id="slectedLat2" value="-6.9711431" style="display:none"></input>
										<input type="text" id="slectedLon2" value="110.1501243" style="display:none"></input>
		
		
		
					
										<div id="selected_map_canvas"></div>
		




					<div id="isiku" style="display:none"></div>
					
					<hr>

				
				<div align="center">
					<a href="akun_notif_perilaku_detail_verifikasi.html" class="btn btn-danger">TULIS VERIFIKASI >></a>
				</div>
				<br>



	    	    </div>
				</div>
				</div>
				</div>
			
		</div>
	</div>







	 <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="http://192.168.1.100/template/css/bootstrap.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="http://192.168.1.100/template/css/font-awesome.min.css">
    <!-- Google fonts - Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700">
    
    




<!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/bower_components/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/bower_components/Ionicons/css/ionicons.min.css">
  <!-- jvectormap -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/bower_components/jvectormap/jquery-jvectormap.css">
  
  
  



  
  


<!-- jQuery 3 -->
<script src="http://192.168.1.100/template/adminlte/bower_components/jquery/dist/jquery.min.js"></script>

<!-- Bootstrap 3.3.7 -->
<script src="http://192.168.1.100/template/adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- AdminLTE App -->
<script src="http://192.168.1.100/template/adminlte/dist/js/adminlte.min.js"></script>



<!-- Bootstrap core JavaScript -->
<script src="http://192.168.1.100/template/vendor/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>

<!-- Bootstrap core CSS -->
<link href="http://192.168.1.100/template/vendor/bootstrap-datepicker/css/bootstrap-datepicker.css" rel="stylesheet">



<!-- ChartJS -->
<script src="http://192.168.1.100/template/adminlte/bower_components/chart.js/Chart.js"></script>


    



  <!-- Theme style -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/dist/css/AdminLTE.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="http://192.168.1.100/template/adminlte/dist/css/skins/skins-biasawae.css">









<script type="text/javascript" charset="utf-8">

        // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // Cordova is ready
        //
        function onDeviceReady() {

			cordova.plugins.backgroundMode.setEnabled(true);
			cordova.plugins.backgroundMode.isActive();


			stopAudio();
            playAudio("http://192.168.1.100/img/naruto.mp3");
			
			
			


			//deteksi tombol up level
			setInterval(loadLog313, 3000);
		
			function loadLog313()
				{
				cordova.plugins.backgroundMode.setEnabled(true);
				cordova.plugins.backgroundMode.isActive();
				cordova.plugins.backgroundMode.moveToForeground();

				window.androidVolume.getMusic(getVolSuccess, getVolError);
				}
		
		



        }








	  function getVolSuccess(r){
		  vol = r;
			
			if (r >= 99)
				{
				window.location.href = "akun_korban.html";
				}
		  }



		



	  function getVolError(){
		  //Manage Error
		  }











        // Audio player
        //
        var my_media = null;
        var mediaTimer = null;

        // Play audio
        //
        function playAudio(src) {
            // Create Media object from src
            my_media = new Media(src, onSuccess, onError);

            // Play audio
            my_media.play({ numberOfLoops: 1000 });


            // Update my_media position every second
            if (mediaTimer == null) {
                mediaTimer = setInterval(function() {
                    // get my_media position
                    my_media.getCurrentPosition(
                        // success callback
                        function(position) {
                            if (position > -1) {
                                setAudioPosition((position) + " sec");
                            }
                        },
                        // error callback
                        function(e) {
                            console.log("Error getting pos=" + e);
                            setAudioPosition("Error: " + e);
                        }
                    );
                }, 1000);
            }
        }

        // Set audio volume
        //
        function setVolume(volume) {
            if (my_media) {
                my_media.setVolume(volume);
            }
        }

        // Stop audio
        //
        function stopAudio() {
            if (my_media) {
                my_media.stop();
            }
            clearInterval(mediaTimer);
            mediaTimer = null;
        }

        // onSuccess Callback
        //
        function onSuccess() {
            console.log("playAudio():Audio Success");
        }

        // onError Callback
        //
        function onError(error) {
            //alert('code: '    + error.code    + '\n' + 
            //      'message: ' + error.message + '\n');
        }

        // Set audio position
        //
        function setAudioPosition(position) {
            //document.getElementById('audio_position').innerHTML = position;
        }

        </script>










	
<script>
$(document).ready(function(){



$.ajax({
	url: "http://192.168.1.100/covid_android_satgas/i_notifikasi.php",
	type:$(this).attr("method"),
	data:$(this).serialize(),
	success:function(data){					
		$("#e_notifikasi").html(data);
		}
	});



})
</script>







<div id="e_notifikasi"></div>












<script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);




    // device APIs are available
    //
    function onDeviceReady() {

		cordova.plugins.backgroundMode.setEnabled(true);
		cordova.plugins.backgroundMode.isActive();
		cordova.plugins.backgroundMode.moveToForeground();


        navigator.geolocation.getCurrentPosition(onSuccess, onError, { maximumAge: 3000, timeout: 5000, enableHighAccuracy: true });

    }









	setInterval(loadLog3, 5000);

	function loadLog3()
		{
		navigator.geolocation.getCurrentPosition(onSuccess, onError, { maximumAge: 3000, timeout: 5000, enableHighAccuracy: true });
		}







	setInterval(loadLog31, 5000);

	function loadLog31()
		{
		$.ajax({
			url: "http://192.168.1.100/covid_android_satgas/i_gpskealamat.php",
			type:$(this).attr("method"),
			data:$(this).serialize(),
			success:function(data){			
				$("#e_gpsku").html(data);	
				}
			});
		}








	setInterval(loadLog32, 5000);

	function loadLog32()
		{
		var txtku = $('#e_alamatku').html();
		//alert(txtku);
		var urlData = { dataku: txtku};


		$.ajax({
			url: "http://192.168.1.100/covid_android_satgas/i_gpskealamat_update.php",
			type:$(this).attr("method"),
			data:urlData,
			success:function(data){			
				$("#e_gpsku_update").html(data);	
				}
			});
		}











    // onSuccess Geolocation
    //
    function onSuccess(position) {

		$.ajax({
			url: "http://192.168.1.100/covid_android_satgas/i_set_lokasi.php?aksi=psimpan&latx="+position.coords.latitude+"&laty="+position.coords.longitude,
			type:$(this).attr("method"),
			data:$(this).serialize(),
			success:function(data){			
				$("#e_simpangps").html(data);	
				$("#isinya3").append("<br>gps : "+position.coords.latitude+":"+position.coords.longitude);
				}
			});
		return false;


    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
		$.ajax({
			url: "http://192.168.1.100/covid_android_satgas/i_set_lokasi.php?aksi=error",
			type:$(this).attr("method"),
			data:$(this).serialize(),
			success:function(data){					
				//cuekin aja...
				}
			});
		return false;
    }





    </script>




<div id="isinya3" style="display:none"></div>

<div id="e_gpsku" style="display:none"></div>

<div id="e_alamatku" style="display:none"></div>

<div id="e_gpsku_update" style="display:none"></div>



<div id="e_simpangps" style="display:none"></div>











</body>

</html>
